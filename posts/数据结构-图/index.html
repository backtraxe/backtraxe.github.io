<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title class=pjax-title>数据结构-图 - Backtraxe' World</title><meta name=Description content="Hugo DoIt 主题官方文档"><meta property="og:title" content="数据结构-图"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://backtraxe.github.io/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-08T16:51:46+08:00"><meta property="article:modified_time" content="2022-08-17T03:10:15+08:00"><meta property="og:site_name" content="Backtraxe' World"><meta name=twitter:card content="summary"><meta name=twitter:title content="数据结构-图"><meta name=twitter:description content><meta name=application-name content="traXe"><meta name=apple-mobile-web-app-title content="traXe"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://backtraxe.github.io/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE/><link rel=prev href=https://backtraxe.github.io/posts/%E4%BD%8D%E8%BF%90%E7%AE%97%E6%8A%80%E5%B7%A7/><link rel=next href=https://backtraxe.github.io/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%93%BE%E8%A1%A8/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"数据结构-图","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/backtraxe.github.io\/posts\/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE\/"},"genre":"posts","keywords":"数据结构, 图","wordcount":7251,"url":"https:\/\/backtraxe.github.io\/posts\/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE\/","datePublished":"2022-06-08T16:51:46+08:00","dateModified":"2022-08-17T03:10:15+08:00","publisher":{"@type":"Organization","name":"Backtraxe"},"author":{"@type":"Person","name":"Backtraxe"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark")}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")]</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Backtraxe' World">traXe</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/series/>系列 </a><a class=menu-item href=/categories/documentation/>文档 </a><a class=menu-item href=/about/>关于 </a><a class=menu-item href=https://github.com/backtraxe title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i> </a><span class="menu-item delimiter"></span><a href=# onclick=return!1 class="menu-item language" title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" id=language-select-desktop onchange="location=this.value"><option value=/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE/ selected>简体中文</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=# onclick=return!1 class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Backtraxe' World">traXe</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# onclick=return!1 class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/series/ title>系列</a><a class=menu-item href=/categories/documentation/ title>文档</a><a class=menu-item href=/about/ title>关于</a><a class=menu-item href=https://github.com/backtraxe title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i></a><a href=# onclick=return!1 class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
</a><a href=# onclick=return!1 class=menu-item title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" onchange="location=this.value"><option value=/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%9B%BE/ selected>简体中文</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#1术语表>1.术语表</a></li><li><a href=#2图的存储>2.图的存储</a><ul><li><a href=#21-邻接矩阵>2.1 邻接矩阵</a></li><li><a href=#22-邻接表>2.2 邻接表</a></li><li><a href=#23-其他>2.3 其他</a><ul><li><a href=#链式邻接表>链式邻接表</a></li><li><a href=#链式前向星>链式前向星</a></li></ul></li></ul></li><li><a href=#3图的遍历>3.图的遍历</a><ul><li><ul><li><a href=#31-深度优先搜索dfs>3.1 深度优先搜索（DFS）</a></li><li><a href=#32-广度优先搜索bfs>3.2 广度优先搜索（BFS）</a></li><li><a href=#33-双向-bfs>3.3 双向 BFS</a></li></ul></li></ul></li><li><a href=#4环检测>4.环检测</a><ul><li><a href=#41-dfs布尔数组表示顶点是否在当前路径上>4.1 DFS：布尔数组表示顶点是否在当前路径上</a></li><li><a href=#42-dfsvis-数组表示顶点的不同状态未访问访问中已访问>4.2 DFS：vis 数组表示顶点的不同状态（未访问、访问中、已访问）</a></li><li><a href=#43-bfs每次删除入度为-0-的顶点>4.3 BFS：每次删除入度为 0 的顶点</a></li></ul></li><li><a href=#5拓扑排序>5.拓扑排序</a><ul><li><a href=#51-dfs后序遍历然后逆序>5.1 DFS：后序遍历，然后逆序</a></li><li><a href=#52-bfs入度为-0-的顶点优先>5.2 BFS：入度为 0 的顶点优先</a></li></ul></li><li><a href=#6二分图>6.二分图</a><ul><li><a href=#61-dfs>6.1 DFS</a></li><li><a href=#62-bfs>6.2 BFS</a></li></ul></li><li><a href=#7flood-fill-算法>7.Flood Fill 算法</a><ul><li><a href=#71-dfs>7.1 DFS</a></li><li><a href=#72-bfs>7.2 BFS</a><ul><li><a href=#保存坐标的几种方式>保存坐标的几种方式</a></li></ul></li></ul></li><li><a href=#8最小生成树>8.最小生成树</a><ul><li><a href=#81-kruskal-算法>8.1 Kruskal 算法</a></li><li><a href=#82-prim-算法>8.2 Prim 算法</a></li></ul></li><li><a href=#9最短路径>9.最短路径</a><ul><li><a href=#91-dijkstra-算法>9.1 Dijkstra 算法</a></li><li><a href=#92-spfa-算法>9.2 SPFA 算法</a></li><li><a href=#93-bellman-ford-算法>9.3 Bellman-Ford 算法</a></li><li><a href=#94-a-算法>9.4 A* 算法</a></li></ul></li><li><a href=#实战>实战</a><ul><li><a href=#flood-fill>Flood Fill</a><ul><li><a href=#图像渲染>图像渲染</a></li><li><a href=#岛屿数量>岛屿数量</a></li><li><a href=#被围绕的区域>被围绕的区域</a></li></ul></li><li><a href=#最小生成树>最小生成树</a><ul><li><a href=#连接所有点的最小费用>连接所有点的最小费用</a></li></ul></li><li><a href=#其他>其他</a><ul><li><a href=#封闭岛屿的数量>封闭岛屿的数量</a></li><li><a href=#1020-飞地的数量>1020. 飞地的数量</a></li><li><a href=#695-岛屿的最大面积>695. 岛屿的最大面积</a></li><li><a href=#1905-统计子岛屿>1905. 统计子岛屿</a></li><li><a href=#694-不同岛屿的数量>694. 不同岛屿的数量</a></li></ul></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle","wide")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">数据结构-图</h1><div class=post-meta><div class=post-meta-line><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://github.com/backtraxe title=Author target=_blank rel="noopener noreffer author" class=author>Backtraxe</a>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/><i class="far fa-folder fa-fw"></i>数据结构</a>&nbsp;<a href=/categories/%E5%9B%BE/><i class="far fa-folder fa-fw"></i>图</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-06-08>2022-06-08</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2022-08-17>2022-08-17</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 7251 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 15 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1术语表>1.术语表</a></li><li><a href=#2图的存储>2.图的存储</a><ul><li><a href=#21-邻接矩阵>2.1 邻接矩阵</a></li><li><a href=#22-邻接表>2.2 邻接表</a></li><li><a href=#23-其他>2.3 其他</a><ul><li><a href=#链式邻接表>链式邻接表</a></li><li><a href=#链式前向星>链式前向星</a></li></ul></li></ul></li><li><a href=#3图的遍历>3.图的遍历</a><ul><li><ul><li><a href=#31-深度优先搜索dfs>3.1 深度优先搜索（DFS）</a></li><li><a href=#32-广度优先搜索bfs>3.2 广度优先搜索（BFS）</a></li><li><a href=#33-双向-bfs>3.3 双向 BFS</a></li></ul></li></ul></li><li><a href=#4环检测>4.环检测</a><ul><li><a href=#41-dfs布尔数组表示顶点是否在当前路径上>4.1 DFS：布尔数组表示顶点是否在当前路径上</a></li><li><a href=#42-dfsvis-数组表示顶点的不同状态未访问访问中已访问>4.2 DFS：vis 数组表示顶点的不同状态（未访问、访问中、已访问）</a></li><li><a href=#43-bfs每次删除入度为-0-的顶点>4.3 BFS：每次删除入度为 0 的顶点</a></li></ul></li><li><a href=#5拓扑排序>5.拓扑排序</a><ul><li><a href=#51-dfs后序遍历然后逆序>5.1 DFS：后序遍历，然后逆序</a></li><li><a href=#52-bfs入度为-0-的顶点优先>5.2 BFS：入度为 0 的顶点优先</a></li></ul></li><li><a href=#6二分图>6.二分图</a><ul><li><a href=#61-dfs>6.1 DFS</a></li><li><a href=#62-bfs>6.2 BFS</a></li></ul></li><li><a href=#7flood-fill-算法>7.Flood Fill 算法</a><ul><li><a href=#71-dfs>7.1 DFS</a></li><li><a href=#72-bfs>7.2 BFS</a><ul><li><a href=#保存坐标的几种方式>保存坐标的几种方式</a></li></ul></li></ul></li><li><a href=#8最小生成树>8.最小生成树</a><ul><li><a href=#81-kruskal-算法>8.1 Kruskal 算法</a></li><li><a href=#82-prim-算法>8.2 Prim 算法</a></li></ul></li><li><a href=#9最短路径>9.最短路径</a><ul><li><a href=#91-dijkstra-算法>9.1 Dijkstra 算法</a></li><li><a href=#92-spfa-算法>9.2 SPFA 算法</a></li><li><a href=#93-bellman-ford-算法>9.3 Bellman-Ford 算法</a></li><li><a href=#94-a-算法>9.4 A* 算法</a></li></ul></li><li><a href=#实战>实战</a><ul><li><a href=#flood-fill>Flood Fill</a><ul><li><a href=#图像渲染>图像渲染</a></li><li><a href=#岛屿数量>岛屿数量</a></li><li><a href=#被围绕的区域>被围绕的区域</a></li></ul></li><li><a href=#最小生成树>最小生成树</a><ul><li><a href=#连接所有点的最小费用>连接所有点的最小费用</a></li></ul></li><li><a href=#其他>其他</a><ul><li><a href=#封闭岛屿的数量>封闭岛屿的数量</a></li><li><a href=#1020-飞地的数量>1020. 飞地的数量</a></li><li><a href=#695-岛屿的最大面积>695. 岛屿的最大面积</a></li><li><a href=#1905-统计子岛屿>1905. 统计子岛屿</a></li><li><a href=#694-不同岛屿的数量>694. 不同岛屿的数量</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=1术语表 class=headerLink><a href=#1%e6%9c%af%e8%af%ad%e8%a1%a8 class=header-mark></a>1.术语表</h2><p>图（graph）</p><p><strong>边（edge）</strong>：连接两个顶点。</p><ul><li>自环：起点和终点是同一个顶点的边。</li><li>平行边：连接同一对顶点的两条边。</li></ul><p>边是否存在方向：</p><ul><li>有向图：边有方向。</li><li>无向图：边无方向。</li></ul><p>是否有环：</p><ul><li>无环图：不存在环的图。</li></ul><p>顶点（vertex）</p><p><strong>度（degree）</strong>：顶点连接的边的数量。</p><ul><li>入度（indegree）：<strong>终点</strong>是当前顶点的<strong>有向边</strong>的数量（到达当前顶点）。</li><li>出度（outdegree）：<strong>起点</strong>是当前顶点的<strong>有向边</strong>的数量（从当前顶点出发）。</li></ul><p><strong>路径（path）</strong>：由边连接的一系列顶点。</p><ul><li>简单路径：无重复顶点的路径。</li></ul><p><strong>环（loop）</strong>：起点和终点相同的路径。</p><ul><li>简单环：无重复顶点的环。</li></ul><p>是否存在平行边：</p><ul><li>简单图：无平行边的图。</li><li>多重图：存在平行边的图。</li></ul><p>子图：边和连接的顶点的子集。</p><p><strong>连通图</strong>：任意一个顶点都存在路径到达另一个任意顶点。</p><ul><li>连通子图：</li><li>极大连通子图：</li></ul><p><strong>二分图</strong>：能将所有顶点分为两个部分的图，每条边的两个顶点分别属于不同的部分。</p><br><h2 id=2图的存储 class=headerLink><a href=#2%e5%9b%be%e7%9a%84%e5%ad%98%e5%82%a8 class=header-mark></a>2.图的存储</h2><h3 id=21-邻接矩阵 class=headerLink><a href=#21-%e9%82%bb%e6%8e%a5%e7%9f%a9%e9%98%b5 class=header-mark></a>2.1 邻接矩阵</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// mat[u][v] == true 表示顶点 u 到顶点 v 存在一条有向边，u 是起点，v 是终点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>boolean</span><span class=o>[][]</span> <span class=n>mat</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>][</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// mat[u][v] == w 表示顶点 u 到顶点 v 的有向边的边权 w
</span></span></span><span class=line><span class=cl><span class=c1>// 可将 mat[u][v] 赋值为 0 或 Integer.MAX_VALUE 表示 u 和 v 之间无边
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span><span class=o>[][]</span> <span class=n>mat</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>][</span><span class=n>n</span><span class=o>];</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>优点：可快速判断两个顶点是否相邻</li><li>缺点：占用空间大</li></ul><br><h3 id=22-邻接表 class=headerLink><a href=#22-%e9%82%bb%e6%8e%a5%e8%a1%a8 class=header-mark></a>2.2 邻接表</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// graph[u] 存储从顶点 u 开始的所有边的终点集合
</span></span></span><span class=line><span class=cl><span class=c1>// graph[u].get(i) == v 表示顶点 u 开始的第 i 条边的终点 v
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl><span class=c1>// graph[u].get(i)[0] == v, graph[u].get(i)[1] == w 表示顶点 u 开始的第 i 条边的终点 v，边权 w
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>    <span class=n>graph</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 快速判断两个顶点是否相邻
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Set</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashSet</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashSet</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>    <span class=n>graph</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashSet</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 快速判断两个顶点是否相邻，从顶点 u 开始的所有边的终点集合有序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Set</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeSet</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeSet</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>    <span class=n>graph</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeSet</span><span class=o>&lt;&gt;();</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>优点：占用空间小</li><li>缺点：无法快速判断两个顶点是否相邻（用 Set 存储可解决）</li></ul><br><h3 id=23-其他 class=headerLink><a href=#23-%e5%85%b6%e4%bb%96 class=header-mark></a>2.3 其他</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1.邻接表（无边权）
</span></span></span><span class=line><span class=cl><span class=c1>// adjList1[u] 表示顶点 u 的相邻顶点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>adjList1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2.邻接表 有边权
</span></span></span><span class=line><span class=cl><span class=c1>// adjList2[u] = { {v1, w1}, {v2, w2} ... } 表示顶点 u 的相邻顶点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;[]</span> <span class=n>adjList2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 3.邻接表（无边权，可快速查询某顶点是否相邻）
</span></span></span><span class=line><span class=cl><span class=c1>// adjSet[u] 表示顶点 u 的相邻顶点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>TreeSet</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>adjSet</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 4.邻接矩阵
</span></span></span><span class=line><span class=cl><span class=c1>// adjMat[u][v] 表示顶点 u 到 顶点 v 的边的权值。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span><span class=o>[][]</span> <span class=n>adjMat</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 5.边集数组
</span></span></span><span class=line><span class=cl><span class=c1>// edges[i] = { u, v, w } 表示第 i 条边，从顶点 u 到 顶点 v，权值为 w。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span><span class=o>[][]</span> <span class=n>edges</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>邻接表<ul><li>优点：占用的空间少</li><li>缺点：无法快速判断两个节点是否相邻</li><li>适用于稀疏图</li></ul></li><li>邻接矩阵<ul><li>优点：占用的空间多</li><li>缺点：可以快速判断两个节点是否相邻</li><li>适用于稠密图</li></ul></li></ul><h4 id=链式邻接表 class=headerLink><a href=#%e9%93%be%e5%bc%8f%e9%82%bb%e6%8e%a5%e8%a1%a8 class=header-mark></a>链式邻接表</h4><p><strong>实现</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 边的定义
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>Edge</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 起点，终点，边权
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 边集数组
</span></span></span><span class=line><span class=cl><span class=c1>// edges[j] 存储第 j 条边的 { 起点 u，终点 v，边权 w }
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Edge</span><span class=o>[]</span> <span class=n>edges</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 或者 int[][] edges;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 表头数组
</span></span></span><span class=line><span class=cl><span class=c1>// adjEdges[u] 存储 u 点的所有出边的编号
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>adjEdges</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>可视化</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>输入：
</span></span><span class=line><span class=cl>6 5
</span></span><span class=line><span class=cl>4 3 90
</span></span><span class=line><span class=cl>1 4 30
</span></span><span class=line><span class=cl>5 6 60
</span></span><span class=line><span class=cl>1 5 20
</span></span><span class=line><span class=cl>5 2 70
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>边集数组：
</span></span><span class=line><span class=cl>0 { 4, 3, 90 }
</span></span><span class=line><span class=cl>1 { 3, 4, 90 }
</span></span><span class=line><span class=cl>2 { 1, 4, 30 }
</span></span><span class=line><span class=cl>3 { 4, 1, 30 }
</span></span><span class=line><span class=cl>4 { 5, 6, 60 }
</span></span><span class=line><span class=cl>5 { 6, 5, 60 }
</span></span><span class=line><span class=cl>6 { 1, 5, 20 }
</span></span><span class=line><span class=cl>7 { 5, 1, 20 }
</span></span><span class=line><span class=cl>8 { 5, 2, 70 }
</span></span><span class=line><span class=cl>9 { 2, 5, 70 }
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>表头数组：
</span></span><span class=line><span class=cl>1 { 2, 6 }
</span></span><span class=line><span class=cl>2 { 9 }
</span></span><span class=line><span class=cl>3 { 1 }
</span></span><span class=line><span class=cl>4 { 0, 3 }
</span></span><span class=line><span class=cl>5 { 4, 7, 8 }
</span></span><span class=line><span class=cl>6 { 5 }
</span></span></code></pre></td></tr></table></div></div><p><strong>特点</strong></p><ul><li>空间复杂度：$O(n+m)$</li><li>适用于各种图。</li><li>能够处理反向边，边的编号与 1 异或得到反向边。</li></ul><h4 id=链式前向星 class=headerLink><a href=#%e9%93%be%e5%bc%8f%e5%89%8d%e5%90%91%e6%98%9f class=header-mark></a>链式前向星</h4><p><strong>实现</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 边的定义
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>class</span> <span class=nc>Edge</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 终点，边权，下一条边的编号
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>v</span><span class=o>,</span> <span class=n>w</span><span class=o>,</span> <span class=n>ne</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 边集数组
</span></span></span><span class=line><span class=cl><span class=c1>// edges[j] 存储第 j 条边的 { 终点 v，边权 w，下一条边的编号 ne }
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Edge</span><span class=o>[]</span> <span class=n>edges</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 或者 int[][] edges;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 表头数组
</span></span></span><span class=line><span class=cl><span class=c1>// firstEdge[u] 存储 u 点的第一条出边的编号
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span><span class=o>[]</span> <span class=n>firstEdge</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 添加边
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>addEdge</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v</span><span class=o>,</span> <span class=kt>int</span> <span class=n>w</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Edge</span> <span class=n>e</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Edge</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>e</span><span class=o>.</span><span class=na>v</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>e</span><span class=o>.</span><span class=na>w</span> <span class=o>=</span> <span class=n>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 头插法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>e</span><span class=o>.</span><span class=na>ne</span> <span class=o>=</span> <span class=n>firstEdge</span><span class=o>[</span><span class=n>u</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=n>edges</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>e</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>firstEdge</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>可视化</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>输入：
</span></span><span class=line><span class=cl>6 5
</span></span><span class=line><span class=cl>4 3 90
</span></span><span class=line><span class=cl>1 4 30
</span></span><span class=line><span class=cl>5 6 60
</span></span><span class=line><span class=cl>1 5 20
</span></span><span class=line><span class=cl>5 2 70
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>边集数组：
</span></span><span class=line><span class=cl>0 { 3, 90 }
</span></span><span class=line><span class=cl>1 { 3, 4, 90 }
</span></span><span class=line><span class=cl>2 { 1, 4, 30 }
</span></span><span class=line><span class=cl>3 { 4, 1, 30 }
</span></span><span class=line><span class=cl>4 { 5, 6, 60 }
</span></span><span class=line><span class=cl>5 { 6, 5, 60 }
</span></span><span class=line><span class=cl>6 { 1, 5, 20 }
</span></span><span class=line><span class=cl>7 { 5, 1, 20 }
</span></span><span class=line><span class=cl>8 { 5, 2, 70 }
</span></span><span class=line><span class=cl>9 { 2, 5, 70 }
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>表头数组：
</span></span><span class=line><span class=cl>1 { 2, 6 }
</span></span><span class=line><span class=cl>2 { 9 }
</span></span><span class=line><span class=cl>3 { 1 }
</span></span><span class=line><span class=cl>4 { 0, 3 }
</span></span><span class=line><span class=cl>5 { 4, 7, 8 }
</span></span><span class=line><span class=cl>6 { 5 }
</span></span></code></pre></td></tr></table></div></div><p><strong>特点</strong></p><ul><li>空间复杂度：$O(n+m)$</li></ul><h2 id=3图的遍历 class=headerLink><a href=#3%e5%9b%be%e7%9a%84%e9%81%8d%e5%8e%86 class=header-mark></a>3.图的遍历</h2><h4 id=31-深度优先搜索dfs class=headerLink><a href=#31-%e6%b7%b1%e5%ba%a6%e4%bc%98%e5%85%88%e6%90%9c%e7%b4%a2dfs class=header-mark></a>3.1 深度优先搜索（DFS）</h4><p>Depth First Search</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>void</span> <span class=nf>traverse</span><span class=o>(</span><span class=n>Graph</span> <span class=n>graph</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>u</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>u</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>u</span><span class=o>,</span> <span class=n>vis</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>dfs</span><span class=o>(</span><span class=n>Graph</span> <span class=n>graph</span><span class=o>,</span> <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 前序
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 树枝
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>])</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>vis</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 后序
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=32-广度优先搜索bfs class=headerLink><a href=#32-%e5%b9%bf%e5%ba%a6%e4%bc%98%e5%85%88%e6%90%9c%e7%b4%a2bfs class=header-mark></a>3.2 广度优先搜索（BFS）</h4><p>Breadth First Search</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>void</span> <span class=nf>traverse</span><span class=o>(</span><span class=n>Graph</span> <span class=n>graph</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>u</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>u</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>        <span class=n>bfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>u</span><span class=o>,</span> <span class=n>vis</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>bfs</span><span class=o>(</span><span class=n>Graph</span> <span class=n>graph</span><span class=o>,</span> <span class=kt>int</span> <span class=n>start</span><span class=o>,</span> <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>queue</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Queue</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=n>queue</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>start</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>vis</span><span class=o>[</span><span class=n>start</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>step</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=o>(!</span><span class=n>queue</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>size</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=na>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>size</span><span class=o>--</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 此处可添加结束条件
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>queue</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>step</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=33-双向-bfs class=headerLink><a href=#33-%e5%8f%8c%e5%90%91-bfs class=header-mark></a>3.3 双向 BFS</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java></code></pre></td></tr></table></div></div><h2 id=4环检测 class=headerLink><a href=#4%e7%8e%af%e6%a3%80%e6%b5%8b class=header-mark></a>4.环检测</h2><ul><li>DFS：若下个待访问的顶点在当前访问路径上，则说明存在环。</li><li>BFS：若存在顶点未被访问，则说明存在环。</li></ul><p><a href=https://leetcode.cn/problems/course-schedule/ target=_blank rel="noopener noreffer">207. 课程表</a></p><h3 id=41-dfs布尔数组表示顶点是否在当前路径上 class=headerLink><a href=#41-dfs%e5%b8%83%e5%b0%94%e6%95%b0%e7%bb%84%e8%a1%a8%e7%a4%ba%e9%a1%b6%e7%82%b9%e6%98%af%e5%90%a6%e5%9c%a8%e5%bd%93%e5%89%8d%e8%b7%af%e5%be%84%e4%b8%8a class=header-mark></a>4.1 DFS：布尔数组表示顶点是否在当前路径上</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>canFinish</span><span class=o>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=o>,</span> <span class=kt>int</span><span class=o>[][]</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>boolean</span><span class=o>[]</span> <span class=n>onPath</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>course</span> <span class=o>:</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=c1>// 建图
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>graph</span><span class=o>[</span><span class=n>course</span><span class=o>[</span><span class=n>1</span><span class=o>]].</span><span class=na>add</span><span class=o>(</span><span class=n>course</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>u</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>u</span><span class=o>++)</span> <span class=c1>// DFS 遍历
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=n>dfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>u</span><span class=o>,</span> <span class=n>vis</span><span class=o>,</span> <span class=n>onPath</span><span class=o>))</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>dfs</span><span class=o>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;[]</span> <span class=n>graph</span><span class=o>,</span> <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span><span class=o>,</span> <span class=kt>boolean</span><span class=o>[]</span> <span class=n>onPath</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 返回是否存在环
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>onPath</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>onPath</span><span class=o>[</span><span class=n>v</span><span class=o>])</span> <span class=c1>// 找到环
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=n>dfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>vis</span><span class=o>,</span> <span class=n>onPath</span><span class=o>))</span> <span class=c1>// 已找到环，剪枝
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>onPath</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span> <span class=c1>// 回溯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=42-dfsvis-数组表示顶点的不同状态未访问访问中已访问 class=headerLink><a href=#42-dfsvis-%e6%95%b0%e7%bb%84%e8%a1%a8%e7%a4%ba%e9%a1%b6%e7%82%b9%e7%9a%84%e4%b8%8d%e5%90%8c%e7%8a%b6%e6%80%81%e6%9c%aa%e8%ae%bf%e9%97%ae%e8%ae%bf%e9%97%ae%e4%b8%ad%e5%b7%b2%e8%ae%bf%e9%97%ae class=header-mark></a>4.2 DFS：vis 数组表示顶点的不同状态（未访问、访问中、已访问）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;&gt;</span> <span class=n>edges</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>visited</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=n>valid</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>canFinish</span><span class=o>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=o>,</span> <span class=kt>int</span><span class=o>[][]</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>edges</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=o>++</span><span class=n>i</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>edges</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;());</span>
</span></span><span class=line><span class=cl>        <span class=n>visited</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>info</span> <span class=o>:</span> <span class=n>prerequisites</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>edges</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>info</span><span class=o>[</span><span class=n>1</span><span class=o>]).</span><span class=na>add</span><span class=o>(</span><span class=n>info</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span> <span class=o>&amp;&amp;</span> <span class=n>valid</span><span class=o>;</span> <span class=o>++</span><span class=n>i</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>visited</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=n>dfs</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>valid</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>int</span> <span class=n>u</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>visited</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> <span class=c1>// 当前路径上
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span><span class=o>:</span> <span class=n>edges</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>u</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>visited</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// 未访问
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>dfs</span><span class=o>(</span><span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(!</span><span class=n>valid</span><span class=o>)</span> <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>visited</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>1</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>valid</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>visited</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span> <span class=c1>// 已访问
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=43-bfs每次删除入度为-0-的顶点 class=headerLink><a href=#43-bfs%e6%af%8f%e6%ac%a1%e5%88%a0%e9%99%a4%e5%85%a5%e5%ba%a6%e4%b8%ba-0-%e7%9a%84%e9%a1%b6%e7%82%b9 class=header-mark></a>4.3 BFS：每次删除入度为 0 的顶点</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>canFinish</span><span class=o>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=o>,</span> <span class=kt>int</span><span class=o>[][]</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;&gt;</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;());</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>indegree</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span> <span class=c1>// 入度
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>edge</span> <span class=o>:</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>edge</span><span class=o>[</span><span class=n>1</span><span class=o>]).</span><span class=na>add</span><span class=o>(</span><span class=n>edge</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span> <span class=c1>// 方向无所谓
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>indegree</span><span class=o>[</span><span class=n>edge</span><span class=o>[</span><span class=n>0</span><span class=o>]]++;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// bfs
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>queue</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>indegree</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=c1>// 入度为 0
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>queue</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>visited</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=c1>// 已访问顶点数量
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>while</span> <span class=o>(!</span><span class=n>queue</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>visited</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>u</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>indegree</span><span class=o>[</span><span class=n>v</span><span class=o>]--;</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>indegree</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=c1>// 入度为 0
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>queue</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>visited</span> <span class=o>==</span> <span class=n>numCourses</span><span class=o>;</span> <span class=c1>// 若有顶点未访问则存在环
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=5拓扑排序 class=headerLink><a href=#5%e6%8b%93%e6%89%91%e6%8e%92%e5%ba%8f class=header-mark></a>5.拓扑排序</h2><p>拓扑排序（Topological Sort）：得到有向图 $G$ 的顶点的一个排列，满足任意一条有向边 $(u,v)$，$u$ 在排列中都在 $v$ 前面，即相对顺序不变。</p><ul><li>DFS：后序添加顶点，然后逆序即可得到拓扑排序序列。（或者建图时颠倒每条边的起始顶点和结束顶点，则最后无需逆序）</li><li>BFS：每次添加入度为 0 的顶点</li></ul><p><a href=https://leetcode.cn/problems/course-schedule-ii/ target=_blank rel="noopener noreffer">210. 课程表 II</a></p><h3 id=51-dfs后序遍历然后逆序 class=headerLink><a href=#51-dfs%e5%90%8e%e5%ba%8f%e9%81%8d%e5%8e%86%e7%84%b6%e5%90%8e%e9%80%86%e5%ba%8f class=header-mark></a>5.1 DFS：后序遍历，然后逆序</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;&gt;</span> <span class=n>graph</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>vis</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>ans</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>index</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span><span class=o>[]</span> <span class=nf>findOrder</span><span class=o>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=o>,</span> <span class=kt>int</span><span class=o>[][]</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;(</span><span class=n>numCourses</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;());</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>pre</span> <span class=o>:</span> <span class=n>prerequisites</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>pre</span><span class=o>[</span><span class=n>0</span><span class=o>]).</span><span class=na>add</span><span class=o>(</span><span class=n>pre</span><span class=o>[</span><span class=n>1</span><span class=o>]);</span>    <span class=c1>// 逆序建图
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// graph.get(pre[1]).add(pre[0]); // 顺序建图
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// index = numCourses - 1; // 顺序建图
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=n>ans</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>dfs</span><span class=o>(</span><span class=n>i</span><span class=o>))</span> <span class=c1>// 存在环
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ans</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>int</span> <span class=n>u</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>u</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>dfs</span><span class=o>(</span><span class=n>v</span><span class=o>))</span> <span class=k>return</span> <span class=kc>true</span><span class=o>;</span> <span class=c1>// 剪枝
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>1</span><span class=o>)</span> <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>      <span class=c1>// 存在环
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>ans</span><span class=o>[</span><span class=n>index</span><span class=o>++]</span> <span class=o>=</span> <span class=n>u</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ans[index--] = u; // 顺序建图
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=52-bfs入度为-0-的顶点优先 class=headerLink><a href=#52-bfs%e5%85%a5%e5%ba%a6%e4%b8%ba-0-%e7%9a%84%e9%a1%b6%e7%82%b9%e4%bc%98%e5%85%88 class=header-mark></a>5.2 BFS：入度为 0 的顶点优先</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span><span class=o>[]</span> <span class=nf>findOrder</span><span class=o>(</span><span class=kt>int</span> <span class=n>numCourses</span><span class=o>,</span> <span class=kt>int</span><span class=o>[][]</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;&gt;</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;(</span><span class=n>numCourses</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;());</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>indegree</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>pre</span> <span class=o>:</span> <span class=n>prerequisites</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>indegree</span><span class=o>[</span><span class=n>pre</span><span class=o>[</span><span class=n>0</span><span class=o>]]++;</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>pre</span><span class=o>[</span><span class=n>1</span><span class=o>]).</span><span class=na>add</span><span class=o>(</span><span class=n>pre</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>ans</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>numCourses</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>index</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>que</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>count</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>numCourses</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>indegree</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=n>ans</span><span class=o>[</span><span class=n>index</span><span class=o>++]</span> <span class=o>=</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(!</span><span class=n>que</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=n>count</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>u</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>indegree</span><span class=o>[</span><span class=n>v</span><span class=o>]--;</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>indegree</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>ans</span><span class=o>[</span><span class=n>index</span><span class=o>++]</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>count</span> <span class=o>==</span> <span class=n>numCourses</span> <span class=o>?</span> <span class=n>ans</span> <span class=o>:</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=6二分图 class=headerLink><a href=#6%e4%ba%8c%e5%88%86%e5%9b%be class=header-mark></a>6.二分图</h2><p>二分图：一个图的顶点可分割为两个互不相交的子集，且每条边的两个顶点都分属于这两个子集。</p><p>可以用两种颜色给顶点染色使得相邻顶点的颜色均不相同。</p><p><a href=https://leetcode.cn/problems/is-graph-bipartite/submissions/ target=_blank rel="noopener noreffer">785. 判断二分图</a></p><h3 id=61-dfs class=headerLink><a href=#61-dfs class=header-mark></a>6.1 DFS</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isBipartite</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>graph</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>u</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>u</span><span class=o>++)</span> <span class=c1>// 非连通图
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>dfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>u</span><span class=o>,</span> <span class=n>vis</span><span class=o>,</span> <span class=n>1</span><span class=o>))</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>graph</span><span class=o>,</span> <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>vis</span><span class=o>,</span> <span class=kt>int</span> <span class=n>color</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>==</span> <span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>])</span> <span class=k>return</span> <span class=kc>false</span><span class=o>;</span> <span class=c1>// 相邻结点颜色相同
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>dfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>vis</span><span class=o>,</span> <span class=o>-</span><span class=n>color</span><span class=o>))</span> <span class=c1>// 两种颜色 1 -1
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span> <span class=c1>// 剪枝
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=62-bfs class=headerLink><a href=#62-bfs class=header-mark></a>6.2 BFS</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isBipartite</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>graph</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>u</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>u</span><span class=o>++)</span> <span class=c1>// 非连通图
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>bfs</span><span class=o>(</span><span class=n>graph</span><span class=o>,</span> <span class=n>u</span><span class=o>,</span> <span class=n>vis</span><span class=o>))</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>bfs</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>graph</span><span class=o>,</span> <span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>vis</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>que</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>vis</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(!</span><span class=n>que</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>size</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=o>(</span><span class=n>size</span><span class=o>--</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>v</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>==</span> <span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>])</span> <span class=k>return</span> <span class=kc>false</span><span class=o>;</span> <span class=c1>// 相邻结点颜色相同
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                        <span class=n>vis</span><span class=o>[</span><span class=n>v</span><span class=o>]</span> <span class=o>=</span> <span class=o>-</span><span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>];</span> <span class=c1>// 两种颜色 1 -1
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=7flood-fill-算法 class=headerLink><a href=#7flood-fill-%e7%ae%97%e6%b3%95 class=header-mark></a>7.Flood Fill 算法</h2><p>也称洪水扩散算法，从一个单元格向四周扩散。</p><p><a href=https://leetcode.cn/problems/number-of-islands/ target=_blank rel="noopener noreffer">200. 岛屿数量</a></p><h3 id=71-dfs class=headerLink><a href=#71-dfs class=header-mark></a>7.1 DFS</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>numIslands</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>grid</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>grid</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>grid</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>grid</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=sc>&#39;1&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>ans</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>                    <span class=n>dfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;1&#39;</span><span class=o>,</span> <span class=sc>&#39;2&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ans</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>mat</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v1</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>x</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>x</span> <span class=o>&gt;=</span> <span class=n>mat</span><span class=o>.</span><span class=na>length</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&gt;=</span> <span class=n>mat</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span> <span class=o>||</span> <span class=n>mat</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>!=</span> <span class=n>v1</span><span class=o>)</span> <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>mat</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>mat</span><span class=o>,</span> <span class=n>x</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>mat</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>mat</span><span class=o>,</span> <span class=n>x</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>mat</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=72-bfs class=headerLink><a href=#72-bfs class=header-mark></a>7.2 BFS</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>m</span><span class=o>,</span> <span class=n>n</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>que</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[][]</span> <span class=n>dir</span> <span class=o>=</span> <span class=o>{</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=o>-</span><span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>},</span> <span class=o>{</span> <span class=o>-</span><span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>}</span> <span class=o>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>numIslands</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>grid</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>n</span> <span class=o>=</span> <span class=n>grid</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>grid</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=sc>&#39;1&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>ans</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>                    <span class=n>bfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;1&#39;</span><span class=o>,</span> <span class=sc>&#39;2&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ans</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>bfs</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>mat</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v1</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>mat</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>!=</span> <span class=n>v1</span><span class=o>)</span> <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>mat</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(!</span><span class=n>que</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>d</span> <span class=o>:</span> <span class=n>dir</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>xx</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>yy</span> <span class=o>=</span> <span class=n>y</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>xx</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>xx</span> <span class=o>&lt;</span> <span class=n>m</span> <span class=o>&amp;&amp;</span> <span class=n>yy</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>yy</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=n>mat</span><span class=o>[</span><span class=n>xx</span><span class=o>][</span><span class=n>yy</span><span class=o>]</span> <span class=o>==</span> <span class=n>v1</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>xx</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>yy</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>mat</span><span class=o>[</span><span class=n>xx</span><span class=o>][</span><span class=n>yy</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=保存坐标的几种方式 class=headerLink><a href=#%e4%bf%9d%e5%ad%98%e5%9d%90%e6%a0%87%e7%9a%84%e5%87%a0%e7%a7%8d%e6%96%b9%e5%bc%8f class=header-mark></a>保存坐标的几种方式</h4><ol><li>数组保存。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=k>new</span> <span class=kt>int</span><span class=o>[]</span> <span class=o>{</span> <span class=n>r</span><span class=o>,</span> <span class=n>c</span> <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=kt>int</span><span class=o>[]</span> <span class=n>p</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>p</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl><span class=n>p</span><span class=o>[</span><span class=n>1</span><span class=o>];</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>分开保存。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>r</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>数学计算。注意防止溢出。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>r</span> <span class=o>*</span> <span class=n>n</span> <span class=o>+</span> <span class=n>c</span><span class=o>);</span> <span class=c1>// n 是列宽
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=n>x</span> <span class=o>%</span> <span class=n>n</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>/=</span> <span class=n>n</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=8最小生成树 class=headerLink><a href=#8%e6%9c%80%e5%b0%8f%e7%94%9f%e6%88%90%e6%a0%91 class=header-mark></a>8.最小生成树</h2><p>从一个 n 个顶点的连通图中生成包含 n 个顶点和 n - 1 条边，且边权之和最小的树。</p><h3 id=81-kruskal-算法 class=headerLink><a href=#81-kruskal-%e7%ae%97%e6%b3%95 class=header-mark></a>8.1 Kruskal 算法</h3><p><strong>步骤：</strong></p><ol><li>将图 $G=(V,E)$ 中的所有边按照长度由小到大进行排序，等长的边可以按任意顺序。</li><li>初始化图 $G&rsquo;=(V,\varnothing)$，从前向后扫描排序后的边，如果扫描到的边 $e$ 在 $G&rsquo;$ 中连接了两个相异的连通块,则将它插入 $G&rsquo;$ 中。</li><li>最后得到的图 $G&rsquo;$ 就是图 $G$ 的最小生成树。</li></ol><p><strong>复杂度：</strong></p><ul><li>时间复杂度：$O(E \log E)$</li><li>空间复杂度：$O(E)$</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>int</span> <span class=nf>kruskal</span><span class=o>(</span><span class=n>Edge</span><span class=o>[]</span> <span class=n>edges</span><span class=o>,</span> <span class=kt>int</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>edges</span><span class=o>,</span> <span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=o>.</span><span class=na>w</span> <span class=o>-</span> <span class=n>b</span><span class=o>.</span><span class=na>w</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>UnionFind</span> <span class=n>uf</span> <span class=o>=</span> <span class=k>new</span> <span class=n>UnionFind</span><span class=o>(</span><span class=n>n</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>   <span class=c1>// 边权和
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>count</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=c1>// 已选边的数量
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=o>(</span><span class=n>Edge</span> <span class=n>e</span> <span class=o>:</span> <span class=n>edges</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>uf</span><span class=o>.</span><span class=na>isConnected</span><span class=o>(</span><span class=n>e</span><span class=o>.</span><span class=na>u</span><span class=o>,</span> <span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>))</span> <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>uf</span><span class=o>.</span><span class=na>union</span><span class=o>(</span><span class=n>e</span><span class=o>.</span><span class=na>u</span><span class=o>,</span> <span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=o>+=</span> <span class=n>e</span><span class=o>.</span><span class=na>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(++</span><span class=n>count</span> <span class=o>==</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>)</span> <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sum</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Edge</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>w</span><span class=o>;</span> <span class=c1>// 起点、终点、边权
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Edge</span><span class=o>(</span><span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v</span><span class=o>,</span> <span class=kt>int</span> <span class=n>w</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>u</span> <span class=o>=</span> <span class=n>u</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>v</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>w</span> <span class=o>=</span> <span class=n>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>UnionFind</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>parent</span><span class=o>;</span> <span class=c1>// 指向父结点
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>size</span><span class=o>;</span>     <span class=c1>// 连通块的数量
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>UnionFind</span><span class=o>(</span><span class=kt>int</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>parent</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>size</span> <span class=o>=</span> <span class=n>n</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>find</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// 寻找根结点
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>i</span><span class=o>)</span>  <span class=c1>// 路径压缩
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>find</span><span class=o>(</span><span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isConnected</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=kt>int</span> <span class=n>j</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// 判断是否连通
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=n>find</span><span class=o>(</span><span class=n>i</span><span class=o>)</span> <span class=o>==</span> <span class=n>find</span><span class=o>(</span><span class=n>j</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>union</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=kt>int</span> <span class=n>j</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// 连通
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>find</span><span class=o>(</span><span class=n>i</span><span class=o>)</span> <span class=o>!=</span> <span class=n>find</span><span class=o>(</span><span class=n>j</span><span class=o>))</span> <span class=n>size</span><span class=o>--;</span>
</span></span><span class=line><span class=cl>        <span class=n>parent</span><span class=o>[</span><span class=n>find</span><span class=o>(</span><span class=n>j</span><span class=o>)]</span> <span class=o>=</span> <span class=n>find</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>    <span class=c1>// j 加入 i
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>size</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>size</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=82-prim-算法 class=headerLink><a href=#82-prim-%e7%ae%97%e6%b3%95 class=header-mark></a>8.2 Prim 算法</h3><p><strong>步骤：</strong></p><ol><li>初始化图 $G&rsquo;=(\varnothing,\varnothing)$，随机选择一个顶点加入，得到 $G&rsquo;=(V&rsquo;,\varnothing)$。</li><li>选择 $G&rsquo;$ 中顶点到其他顶点边权最小的边，将边及其对应顶点加入 $G&rsquo;$。</li><li>重复步骤 2 直到全部顶点都加入 $G&rsquo;$，即 $G$ 的最小生成树。</li></ol><p><strong>复杂度：</strong></p><ul><li>时间复杂度：$O(E \log V)$</li><li>空间复杂度：$O(E)$</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>int</span> <span class=nf>prim</span><span class=o>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Edge</span><span class=o>&gt;[]</span> <span class=n>graph</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>];</span> <span class=c1>// 顶点是否已选择
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>                    <span class=c1>// 最小边权和
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>                      <span class=c1>// 随机选择一个顶点
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>count</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>                  <span class=c1>// 已选择顶点数量
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=n>Edge</span><span class=o>&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;((</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=o>.</span><span class=na>w</span> <span class=o>-</span> <span class=n>b</span><span class=o>.</span><span class=na>w</span><span class=o>);</span> <span class=c1>// 按边权升序
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=n>Edge</span> <span class=n>e</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span>         <span class=c1>// 连接未选择顶点的边才会添加
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>])</span> <span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=o>(!</span><span class=n>pq</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Edge</span> <span class=n>edge</span> <span class=o>=</span> <span class=n>pq</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>edge</span><span class=o>.</span><span class=na>v</span><span class=o>])</span> <span class=k>continue</span><span class=o>;</span>  <span class=c1>// 跳过连接已选择顶点的边
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>u</span> <span class=o>=</span> <span class=n>edge</span><span class=o>.</span><span class=na>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=o>+=</span> <span class=n>edge</span><span class=o>.</span><span class=na>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>count</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>        <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Edge</span> <span class=n>e</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>])</span> <span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>count</span> <span class=o>==</span> <span class=n>n</span><span class=o>)</span> <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sum</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Edge</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>w</span><span class=o>;</span> <span class=c1>// 起点、终点、边权
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Edge</span><span class=o>(</span><span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v</span><span class=o>,</span> <span class=kt>int</span> <span class=n>w</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>u</span> <span class=o>=</span> <span class=n>u</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>v</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>w</span> <span class=o>=</span> <span class=n>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=9最短路径 class=headerLink><a href=#9%e6%9c%80%e7%9f%ad%e8%b7%af%e5%be%84 class=header-mark></a>9.最短路径</h2><h3 id=91-dijkstra-算法 class=headerLink><a href=#91-dijkstra-%e7%ae%97%e6%b3%95 class=header-mark></a>9.1 Dijkstra 算法</h3><p><strong>步骤：</strong></p><ol><li></li></ol><p><strong>复杂度：</strong></p><ul><li>时间复杂度：$ O(E \log V) $</li><li>空间复杂度：$ O(V+E) $</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>int</span><span class=o>[]</span> <span class=nf>dijkstra</span><span class=o>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Edge</span><span class=o>&gt;[]</span> <span class=n>graph</span><span class=o>,</span> <span class=kt>int</span> <span class=n>start</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>dis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>];</span> <span class=c1>// start 到所有顶点的最短距离
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Arrays</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>dis</span><span class=o>,</span> <span class=n>0x3f3f3f3f</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=n>Edge</span><span class=o>&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;((</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=o>.</span><span class=na>w</span> <span class=o>-</span> <span class=n>b</span><span class=o>.</span><span class=na>w</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>count</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>start</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>dis</span><span class=o>[</span><span class=n>start</span><span class=o>]</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vis</span><span class=o>[</span><span class=n>start</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=n>Edge</span> <span class=n>e</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span> <span class=o>{</span> <span class=c1>// 连接未选择顶点的边才会添加
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>])</span> <span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>]</span> <span class=o>=</span> <span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>dis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>],</span> <span class=n>dis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>+</span> <span class=n>e</span><span class=o>.</span><span class=na>w</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=o>(!</span><span class=n>pq</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Edge</span> <span class=n>edge</span> <span class=o>=</span> <span class=n>pq</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>vis</span><span class=o>[</span><span class=n>edge</span><span class=o>.</span><span class=na>v</span><span class=o>])</span> <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>u</span> <span class=o>=</span> <span class=n>edge</span><span class=o>.</span><span class=na>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>count</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>        <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Edge</span> <span class=n>e</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>])</span> <span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>dis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>]</span> <span class=o>=</span> <span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>dis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>],</span> <span class=n>dis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>+</span> <span class=n>e</span><span class=o>.</span><span class=na>w</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>count</span> <span class=o>==</span> <span class=n>n</span><span class=o>)</span> <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>dis</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Edge</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>w</span><span class=o>;</span> <span class=c1>// 起点、终点、边权
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Edge</span><span class=o>(</span><span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v</span><span class=o>,</span> <span class=kt>int</span> <span class=n>w</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>u</span> <span class=o>=</span> <span class=n>u</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>v</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>w</span> <span class=o>=</span> <span class=n>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=92-spfa-算法 class=headerLink><a href=#92-spfa-%e7%ae%97%e6%b3%95 class=header-mark></a>9.2 SPFA 算法</h3><h3 id=93-bellman-ford-算法 class=headerLink><a href=#93-bellman-ford-%e7%ae%97%e6%b3%95 class=header-mark></a>9.3 Bellman-Ford 算法</h3><h3 id=94-a-算法 class=headerLink><a href=#94-a-%e7%ae%97%e6%b3%95 class=header-mark></a>9.4 A* 算法</h3><h2 id=实战 class=headerLink><a href=#%e5%ae%9e%e6%88%98 class=header-mark></a>实战</h2><h3 id=flood-fill class=headerLink><a href=#flood-fill class=header-mark></a>Flood Fill</h3><h4 id=图像渲染 class=headerLink><a href=#%e5%9b%be%e5%83%8f%e6%b8%b2%e6%9f%93 class=header-mark></a>图像渲染</h4><p><a href=https://leetcode.cn/problems/flood-fill/ target=_blank rel="noopener noreffer">733. 图像渲染</a></p><ul><li>DFS</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span><span class=o>[][]</span> <span class=nf>floodFill</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>image</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sr</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sc</span><span class=o>,</span> <span class=kt>int</span> <span class=n>color</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>image</span><span class=o>[</span><span class=n>sr</span><span class=o>][</span><span class=n>sc</span><span class=o>]</span> <span class=o>==</span> <span class=n>color</span><span class=o>)</span> <span class=k>return</span> <span class=n>image</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>image</span><span class=o>,</span> <span class=n>sr</span><span class=o>,</span> <span class=n>sc</span><span class=o>,</span> <span class=n>image</span><span class=o>[</span><span class=n>sr</span><span class=o>][</span><span class=n>sc</span><span class=o>],</span> <span class=n>color</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>image</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>image</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v1</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>x</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>x</span> <span class=o>&gt;=</span> <span class=n>image</span><span class=o>.</span><span class=na>length</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&gt;=</span> <span class=n>image</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span> <span class=o>||</span> <span class=n>image</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>!=</span> <span class=n>v1</span><span class=o>)</span> <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>image</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>image</span><span class=o>,</span> <span class=n>x</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>image</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>image</span><span class=o>,</span> <span class=n>x</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>image</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>BFS</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span><span class=o>[][]</span> <span class=nf>floodFill</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>image</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sr</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sc</span><span class=o>,</span> <span class=kt>int</span> <span class=n>color</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>image</span><span class=o>[</span><span class=n>sr</span><span class=o>][</span><span class=n>sc</span><span class=o>]</span> <span class=o>==</span> <span class=n>color</span><span class=o>)</span> <span class=k>return</span> <span class=n>image</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>oldColor</span> <span class=o>=</span> <span class=n>image</span><span class=o>[</span><span class=n>sr</span><span class=o>][</span><span class=n>sc</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>image</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>que</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span><span class=o>[][]</span> <span class=n>dir</span> <span class=o>=</span> <span class=o>{</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=o>-</span><span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>},</span> <span class=o>{</span> <span class=o>-</span><span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>}</span> <span class=o>};</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>sr</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>sc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(!</span><span class=n>que</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>r</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=n>image</span><span class=o>[</span><span class=n>r</span><span class=o>][</span><span class=n>c</span><span class=o>]</span> <span class=o>=</span> <span class=n>color</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>d</span> <span class=o>:</span> <span class=n>dir</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>rr</span> <span class=o>=</span> <span class=n>r</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>cc</span> <span class=o>=</span> <span class=n>c</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>rr</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>rr</span> <span class=o>&lt;</span> <span class=n>m</span> <span class=o>&amp;&amp;</span> <span class=n>cc</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>cc</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=n>image</span><span class=o>[</span><span class=n>rr</span><span class=o>][</span><span class=n>cc</span><span class=o>]</span> <span class=o>==</span> <span class=n>oldColor</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>rr</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>cc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>image</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=../%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-%e5%b9%b6%e6%9f%a5%e9%9b%86/#%e5%9b%be%e5%83%8f%e6%b8%b2%e6%9f%93 rel>并查集</a></li></ul><h4 id=岛屿数量 class=headerLink><a href=#%e5%b2%9b%e5%b1%bf%e6%95%b0%e9%87%8f class=header-mark></a>岛屿数量</h4><p><a href=https://leetcode.cn/problems/number-of-islands/ target=_blank rel="noopener noreffer">200. 岛屿数量</a></p><ul><li>DFS</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>numIslands</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>grid</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>grid</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>grid</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>grid</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=sc>&#39;1&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>ans</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>                    <span class=n>dfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;1&#39;</span><span class=o>,</span> <span class=sc>&#39;2&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ans</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>grid</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v1</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>x</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>x</span> <span class=o>&gt;=</span> <span class=n>grid</span><span class=o>.</span><span class=na>length</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&gt;=</span> <span class=n>grid</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span> <span class=o>||</span> <span class=n>grid</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>!=</span> <span class=n>v1</span><span class=o>)</span> <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>grid</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>x</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>x</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>BFS</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>m</span><span class=o>,</span> <span class=n>n</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>que</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[][]</span> <span class=n>dir</span> <span class=o>=</span> <span class=o>{</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=o>-</span><span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>},</span> <span class=o>{</span> <span class=o>-</span><span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>}</span> <span class=o>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>numIslands</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>grid</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>n</span> <span class=o>=</span> <span class=n>grid</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>grid</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=sc>&#39;1&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>ans</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>                    <span class=n>bfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;1&#39;</span><span class=o>,</span> <span class=sc>&#39;2&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ans</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>bfs</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>grid</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v1</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>grid</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(!</span><span class=n>que</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>d</span> <span class=o>:</span> <span class=n>dir</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>xx</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>yy</span> <span class=o>=</span> <span class=n>y</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>xx</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>xx</span> <span class=o>&lt;</span> <span class=n>m</span> <span class=o>&amp;&amp;</span> <span class=n>yy</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>yy</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=n>grid</span><span class=o>[</span><span class=n>xx</span><span class=o>][</span><span class=n>yy</span><span class=o>]</span> <span class=o>==</span> <span class=n>v1</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>xx</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>yy</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>grid</span><span class=o>[</span><span class=n>xx</span><span class=o>][</span><span class=n>yy</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=../%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-%e5%b9%b6%e6%9f%a5%e9%9b%86/#%e5%b2%9b%e5%b1%bf%e6%95%b0%e9%87%8f rel>并查集</a></li></ul><h4 id=被围绕的区域 class=headerLink><a href=#%e8%a2%ab%e5%9b%b4%e7%bb%95%e7%9a%84%e5%8c%ba%e5%9f%9f class=header-mark></a>被围绕的区域</h4><p><a href=https://leetcode.cn/problems/surrounded-regions/ target=_blank rel="noopener noreffer">130. 被围绕的区域</a></p><ul><li>DFS</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>solve</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>board</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>m</span> <span class=o>=</span> <span class=n>board</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>board</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 1.将边缘连通块改为其他值
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>m</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 2.修改中间连通块
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> <span class=n>i</span> <span class=o>+</span> <span class=n>1</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> <span class=n>j</span> <span class=o>+</span> <span class=n>1</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>board</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=sc>&#39;O&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>board</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=sc>&#39;X&#39;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 3.还原边缘连通块
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>m</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>board</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v1</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>x</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>x</span> <span class=o>&gt;=</span> <span class=n>board</span><span class=o>.</span><span class=na>length</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&gt;=</span> <span class=n>board</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span> <span class=o>||</span> <span class=n>board</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>!=</span> <span class=n>v1</span><span class=o>)</span> <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>board</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>x</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>x</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>y</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>y</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>v1</span><span class=o>,</span> <span class=n>v2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>BFS</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>m</span><span class=o>,</span> <span class=n>n</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Queue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>que</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayDeque</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[][]</span> <span class=n>dir</span> <span class=o>=</span> <span class=o>{</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>0</span><span class=o>,</span> <span class=o>-</span><span class=n>1</span> <span class=o>},</span> <span class=o>{</span> <span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>},</span> <span class=o>{</span> <span class=o>-</span><span class=n>1</span><span class=o>,</span> <span class=n>0</span> <span class=o>}</span> <span class=o>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>solve</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>board</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>m</span> <span class=o>=</span> <span class=n>board</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>n</span> <span class=o>=</span> <span class=n>board</span><span class=o>[</span><span class=n>0</span><span class=o>].</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 1.将边缘连通块改为其他值
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>m</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 2.修改中间连通块
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> <span class=n>i</span> <span class=o>+</span> <span class=n>1</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> <span class=n>j</span> <span class=o>+</span> <span class=n>1</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>board</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=sc>&#39;O&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>board</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=sc>&#39;X&#39;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 3.还原边缘连通块
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>m</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>bfs</span><span class=o>(</span><span class=n>board</span><span class=o>,</span> <span class=n>m</span> <span class=o>-</span> <span class=n>1</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=sc>&#39;#&#39;</span><span class=o>,</span> <span class=sc>&#39;O&#39;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>bfs</span><span class=o>(</span><span class=kt>char</span><span class=o>[][]</span> <span class=n>mat</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v1</span><span class=o>,</span> <span class=kt>char</span> <span class=n>v2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>mat</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>!=</span> <span class=n>v1</span><span class=o>)</span> <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>mat</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(!</span><span class=n>que</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span> <span class=o>=</span> <span class=n>que</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>d</span> <span class=o>:</span> <span class=n>dir</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>xx</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>yy</span> <span class=o>=</span> <span class=n>y</span> <span class=o>+</span> <span class=n>d</span><span class=o>[</span><span class=n>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>xx</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>xx</span> <span class=o>&lt;</span> <span class=n>m</span> <span class=o>&amp;&amp;</span> <span class=n>yy</span> <span class=o>&gt;=</span> <span class=n>0</span> <span class=o>&amp;&amp;</span> <span class=n>yy</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=n>mat</span><span class=o>[</span><span class=n>xx</span><span class=o>][</span><span class=n>yy</span><span class=o>]</span> <span class=o>==</span> <span class=n>v1</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>xx</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>que</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>yy</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>mat</span><span class=o>[</span><span class=n>xx</span><span class=o>][</span><span class=n>yy</span><span class=o>]</span> <span class=o>=</span> <span class=n>v2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=../%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-%e5%b9%b6%e6%9f%a5%e9%9b%86/#%e8%a2%ab%e5%9b%b4%e7%bb%95%e7%9a%84%e5%8c%ba%e5%9f%9f rel>并查集</a></li></ul><h3 id=最小生成树 class=headerLink><a href=#%e6%9c%80%e5%b0%8f%e7%94%9f%e6%88%90%e6%a0%91 class=header-mark></a>最小生成树</h3><h4 id=连接所有点的最小费用 class=headerLink><a href=#%e8%bf%9e%e6%8e%a5%e6%89%80%e6%9c%89%e7%82%b9%e7%9a%84%e6%9c%80%e5%b0%8f%e8%b4%b9%e7%94%a8 class=header-mark></a>连接所有点的最小费用</h4><p><a href=https://leetcode.cn/problems/min-cost-to-connect-all-points/ target=_blank rel="noopener noreffer">1584. 连接所有点的最小费用</a></p><ul><li>Kruskal</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>minCostConnectPoints</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>points</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>points</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Edge</span><span class=o>[]</span> <span class=n>edges</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Edge</span><span class=o>[</span><span class=n>n</span> <span class=o>*</span> <span class=o>(</span><span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>)</span> <span class=o>/</span> <span class=n>2</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>                <span class=n>edges</span><span class=o>[</span><span class=n>k</span><span class=o>++]</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Edge</span><span class=o>(</span><span class=n>i</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=n>manhattanDistance</span><span class=o>(</span><span class=n>points</span><span class=o>[</span><span class=n>i</span><span class=o>],</span> <span class=n>points</span><span class=o>[</span><span class=n>j</span><span class=o>]));</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>kruskal</span><span class=o>(</span><span class=n>edges</span><span class=o>,</span> <span class=n>n</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>kruskal</span><span class=o>(</span><span class=n>Edge</span><span class=o>[]</span> <span class=n>edges</span><span class=o>,</span> <span class=kt>int</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>edges</span><span class=o>,</span> <span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=o>.</span><span class=na>w</span> <span class=o>-</span> <span class=n>b</span><span class=o>.</span><span class=na>w</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>UnionFind</span> <span class=n>uf</span> <span class=o>=</span> <span class=k>new</span> <span class=n>UnionFind</span><span class=o>(</span><span class=n>n</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>   <span class=c1>// 边权和
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>count</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=c1>// 已选边的数量
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=n>Edge</span> <span class=n>e</span> <span class=o>:</span> <span class=n>edges</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>uf</span><span class=o>.</span><span class=na>isConnected</span><span class=o>(</span><span class=n>e</span><span class=o>.</span><span class=na>u</span><span class=o>,</span> <span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>))</span> <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>uf</span><span class=o>.</span><span class=na>union</span><span class=o>(</span><span class=n>e</span><span class=o>.</span><span class=na>u</span><span class=o>,</span> <span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>sum</span> <span class=o>+=</span> <span class=n>e</span><span class=o>.</span><span class=na>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(++</span><span class=n>count</span> <span class=o>==</span> <span class=n>n</span> <span class=o>-</span> <span class=n>1</span><span class=o>)</span> <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>sum</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>manhattanDistance</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Math</span><span class=o>.</span><span class=na>abs</span><span class=o>(</span><span class=n>x</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>y</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>+</span> <span class=n>Math</span><span class=o>.</span><span class=na>abs</span><span class=o>(</span><span class=n>x</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>y</span><span class=o>[</span><span class=n>1</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Edge</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>w</span><span class=o>;</span> <span class=c1>// 起点、终点、边权
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Edge</span><span class=o>(</span><span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v</span><span class=o>,</span> <span class=kt>int</span> <span class=n>w</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>u</span> <span class=o>=</span> <span class=n>u</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>v</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>w</span> <span class=o>=</span> <span class=n>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>UnionFind</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>parent</span><span class=o>;</span> <span class=c1>// 指向父结点
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>size</span><span class=o>;</span>     <span class=c1>// 连通块的数量
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>UnionFind</span><span class=o>(</span><span class=kt>int</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>parent</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>size</span> <span class=o>=</span> <span class=n>n</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>find</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// 寻找根结点
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>i</span><span class=o>)</span>  <span class=c1>// 路径压缩
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>find</span><span class=o>(</span><span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>parent</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isConnected</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=kt>int</span> <span class=n>j</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// 判断是否连通
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=n>find</span><span class=o>(</span><span class=n>i</span><span class=o>)</span> <span class=o>==</span> <span class=n>find</span><span class=o>(</span><span class=n>j</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>union</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>,</span> <span class=kt>int</span> <span class=n>j</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// 连通
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>find</span><span class=o>(</span><span class=n>i</span><span class=o>)</span> <span class=o>!=</span> <span class=n>find</span><span class=o>(</span><span class=n>j</span><span class=o>))</span> <span class=n>size</span><span class=o>--;</span>
</span></span><span class=line><span class=cl>        <span class=n>parent</span><span class=o>[</span><span class=n>find</span><span class=o>(</span><span class=n>j</span><span class=o>)]</span> <span class=o>=</span> <span class=n>find</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>    <span class=c1>// j 加入 i
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>size</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>size</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Prim</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Solution</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>minCostConnectPoints</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>points</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>points</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>Edge</span><span class=o>&gt;[]</span> <span class=n>graph</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>graph</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>dis</span> <span class=o>=</span> <span class=n>manhattanDistance</span><span class=o>(</span><span class=n>points</span><span class=o>[</span><span class=n>i</span><span class=o>],</span> <span class=n>points</span><span class=o>[</span><span class=n>j</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>                <span class=n>graph</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Edge</span><span class=o>(</span><span class=n>i</span><span class=o>,</span> <span class=n>j</span><span class=o>,</span> <span class=n>dis</span><span class=o>));</span>
</span></span><span class=line><span class=cl>                <span class=n>graph</span><span class=o>[</span><span class=n>j</span><span class=o>].</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Edge</span><span class=o>(</span><span class=n>j</span><span class=o>,</span> <span class=n>i</span><span class=o>,</span> <span class=n>dis</span><span class=o>));</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>prim</span><span class=o>(</span><span class=n>graph</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>prim</span><span class=o>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Edge</span><span class=o>&gt;[]</span> <span class=n>graph</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>graph</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>boolean</span><span class=o>[]</span> <span class=n>vis</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>boolean</span><span class=o>[</span><span class=n>n</span><span class=o>];</span> <span class=c1>// 顶点是否已选择
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>                    <span class=c1>// 最小边权和
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>u</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>                      <span class=c1>// 随机选择一个顶点
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>count</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span>                  <span class=c1>// 已选择顶点数量
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=n>Edge</span><span class=o>&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;((</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=o>.</span><span class=na>w</span> <span class=o>-</span> <span class=n>b</span><span class=o>.</span><span class=na>w</span><span class=o>);</span> <span class=c1>// 按边权升序
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>while</span> <span class=o>(</span><span class=n>count</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=n>Edge</span> <span class=n>e</span> <span class=o>:</span> <span class=n>graph</span><span class=o>[</span><span class=n>u</span><span class=o>])</span>     <span class=c1>// 连接未选择顶点的边才会添加
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>if</span> <span class=o>(!</span><span class=n>vis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>])</span> <span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>pq</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>Edge</span> <span class=n>e</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>do</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>e</span> <span class=o>=</span> <span class=n>pq</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span> <span class=c1>// 跳过没有连接未选择顶点的边
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=o>}</span> <span class=k>while</span> <span class=o>(!</span><span class=n>pq</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>()</span> <span class=o>&amp;&amp;</span> <span class=n>vis</span><span class=o>[</span><span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>            <span class=n>u</span> <span class=o>=</span> <span class=n>e</span><span class=o>.</span><span class=na>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>vis</span><span class=o>[</span><span class=n>u</span><span class=o>]</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>sum</span> <span class=o>+=</span> <span class=n>e</span><span class=o>.</span><span class=na>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>count</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>sum</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>manhattanDistance</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Math</span><span class=o>.</span><span class=na>abs</span><span class=o>(</span><span class=n>x</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>y</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> <span class=o>+</span> <span class=n>Math</span><span class=o>.</span><span class=na>abs</span><span class=o>(</span><span class=n>x</span><span class=o>[</span><span class=n>1</span><span class=o>]</span> <span class=o>-</span> <span class=n>y</span><span class=o>[</span><span class=n>1</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Edge</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>w</span><span class=o>;</span> <span class=c1>// 起点、终点、边权
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Edge</span><span class=o>(</span><span class=kt>int</span> <span class=n>u</span><span class=o>,</span> <span class=kt>int</span> <span class=n>v</span><span class=o>,</span> <span class=kt>int</span> <span class=n>w</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>u</span> <span class=o>=</span> <span class=n>u</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>v</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>w</span> <span class=o>=</span> <span class=n>w</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=其他 class=headerLink><a href=#%e5%85%b6%e4%bb%96 class=header-mark></a>其他</h3><h4 id=封闭岛屿的数量 class=headerLink><a href=#%e5%b0%81%e9%97%ad%e5%b2%9b%e5%b1%bf%e7%9a%84%e6%95%b0%e9%87%8f class=header-mark></a>封闭岛屿的数量</h4><p>将靠边的岛屿变为水，剩下的就是「封闭岛屿」。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>void</span> <span class=nf>dfs</span><span class=o>(</span><span class=kt>int</span><span class=o>[][]</span> <span class=n>grid</span><span class=o>,</span> <span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>x</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>x</span> <span class=o>&gt;=</span> <span class=n>m</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=n>0</span> <span class=o>||</span> <span class=n>y</span> <span class=o>&gt;=</span> <span class=n>n</span> <span class=o>||</span> <span class=n>grid</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>grid</span><span class=o>[</span><span class=n>x</span><span class=o>][</span><span class=n>y</span><span class=o>]</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=c1>// 淹没
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>4</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>nextX</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=n>dx</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>nextY</span> <span class=o>=</span> <span class=n>y</span> <span class=o>+</span> <span class=n>dy</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=n>dfs</span><span class=o>(</span><span class=n>grid</span><span class=o>,</span> <span class=n>nextX</span><span class=o>,</span> <span class=n>nextY</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=1020-飞地的数量 class=headerLink><a href=#1020-%e9%a3%9e%e5%9c%b0%e7%9a%84%e6%95%b0%e9%87%8f class=header-mark></a>1020. 飞地的数量</h4><p>先把靠边的陆地淹掉，然后去数剩下的陆地数量。</p><h4 id=695-岛屿的最大面积 class=headerLink><a href=#695-%e5%b2%9b%e5%b1%bf%e7%9a%84%e6%9c%80%e5%a4%a7%e9%9d%a2%e7%a7%af class=header-mark></a>695. 岛屿的最大面积</h4><p>淹没岛屿的同时，记录这个岛屿的面积。</p><h4 id=1905-统计子岛屿 class=headerLink><a href=#1905-%e7%bb%9f%e8%ae%a1%e5%ad%90%e5%b2%9b%e5%b1%bf class=header-mark></a>1905. 统计子岛屿</h4><p>岛屿 B 中存在一片陆地，在岛屿 A 的对应位置是海水，那么岛屿 B 就不是岛屿 A 的子岛。</p><h4 id=694-不同岛屿的数量 class=headerLink><a href=#694-%e4%b8%8d%e5%90%8c%e5%b2%9b%e5%b1%bf%e7%9a%84%e6%95%b0%e9%87%8f class=header-mark></a>694. 不同岛屿的数量</h4><p>对于形状相同的岛屿，如果从同一起点出发，dfs 函数遍历的顺序肯定是一样的。</p><p>分别用 1, 2, 3, 4 代表上下左右，用 -1, -2, -3, -4 代表上下左右的撤销。</p><p>把二维矩阵中的「岛屿」进行转化，变成比如字符串这样的类型，然后利用 HashSet 这样的数据结构去重，最终得到不同的岛屿的个数。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-08-17</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/>数据结构</a>,&nbsp;<a href=/tags/%E5%9B%BE/>图</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/%E4%BD%8D%E8%BF%90%E7%AE%97%E6%8A%80%E5%B7%A7/ class=prev rel=prev title=位运算技巧><i class="fas fa-angle-left fa-fw"></i>位运算技巧</a>
<a href=/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E9%93%BE%E8%A1%A8/ class=next rel=next title=数据结构-链表>数据结构-链表<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreffer" title="DoIt 0.2.13"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/backtraxe target=_blank rel="noopener noreferrer">Backtraxe</a></span></div><div class=footer-line></div><div class=footer-line></div></div><script>"serviceWorker"in navigator&&(navigator.serviceWorker.register("/sw.min.js",{scope:"/"}).then(function(){}),navigator.serviceWorker.ready.then(function(){}))</script></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/fuse/fuse.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/topbar/topbar.min.js></script><script type=text/javascript src=/lib/pjax/pjax.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script></div><div class=pjax-assets><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:20},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},table:{sort:!0}}</script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript></div></body></html>