# 算法-位运算


<!--more-->

## 1.前置知识

## 2.基本位运算

### 2.1 与

- `&`：同 1 则 1，其余为 0。

```java
// 6  0b0110
// 10 0b1010
// 2  0b0010
(6 & 10) == 2;
```

### 2.2 或

- `|`：同 0 则 0，其余为 1。

```java
// 6  0b0110
// 10 0b1010
// 15 0b1110
(6 | 10) == 14;
```

### 2.3 非

- `~`：0 和 1 互换。

```java
// 只考虑最后 4 位
// 6  0b0110
// 9  0b1001
(~6 & ((1 << 4) - 1)) == 9;
```

### 2.4 异或

- `^`：同 0 异 1。

```java
// 6  0b0110
// 10 0b1010
// 12 0b1100
(6 ^ 10) == 12;
x ^ x == 0;
x ^ 0 == x;
```

### 2.5 左移 1 位

- `<<`：右补 0。

```java
// 6  0b0110
// 12 0b1100
(6 << 1) == 12;
// x *= 2;
x <<= 1;
```

### 2.6 带符号右移 1 位

- `>>`：正数左补 0，负数左补 1。

```java
// -11 0xfffffff5
// -6  0xfffffffa
(-11 >> 1) == -6;
// x > 0 && x /= 2;
x >>= 1;
```

### 2.7 无符号右移 1 位

- `>>>`：左补 0。

```java
// -11        0xfffffff5
// 2147483642 0x7ffffffa
(-11 >>> 1) == 2147483642;
```

## 3.常用操作

### 3.1 判断奇偶

```java
// 奇数 x % 2 == 1
(x & 1) == 1
// 偶数 x % 2 == 0
(x & 1) == 0
```

### 3.2 判断是否 2 的次方

```java
// 将最低位 1 置 0
x > 0 && (x & (x - 1)) == 0
// 只保留最低位 1
x > 0 && (x & -x) == x
// 是否为因数
x > 0 && (1 << 31) % x == 0
```

### 3.3 小写大写转换

```java
// 转大写 (char) (c - 'a' + 'A')
c &= 95
// 转小写 (char) (c - 'A' + 'a')
c |= 32
// 大/小写互相转换
c ^= 32
```

### 3.4 交换两个数

```java
// a' == a ^ b
// b' == b ^ a'  == b ^ a ^ b == a
// a' == a' ^ b' == a ^ b ^ a == b
a ^= b;
b ^= a;
a ^= b;
```

### 3.5 判断符号是否相同

```java
// 0b0... ^ 0b1... == 0b1...
// 0b0... ^ 0b0... == 0b0...
// 0b1... ^ 0b1... == 0b0...
a ^ b > 0;
```

### 3.6 将最低位 1 置为 0

```java
//           n == 0b...10...0
//       n - 1 == 0b...01...1
// n & (n - 1) == 0b...000000
n & (n - 1);
```

### 3.7 只保留最低位 1

```java
//                n == 0b.....10...0
//            n - 1 == 0b.....01...1
//      n & (n - 1) == 0b.....000000
// n -= n & (n - 1) == 0b0...010...0
n -= n & (n - 1);
```

### 3.8 统计 1 的数量

```java
int count = 0;
while (n != 0) {
    count++;
    n = n & (n - 1);
}
```

### 3.9 加 1

```java
//    -n == (~n) + 1
// -(~n) == (~(~n)) + 1
// -(~n) == n + 1
n = -(~n);
```

### 3.10 减 1

```java
//    -n == (~n) + 1
// -(-n) == (~(-n)) + 1
//     n == (~(-n)) + 1
// ~(-n) == n - 1
n = ~(-n);
```

## 4.高级操作

### 4.1 逆序

```java
// 12345678 -> 21436587
x = (x & 0x55555555) << 1 | (x >>> 1) & 0x55555555;
// 21436587 -> 43218765
x = (x & 0x33333333) << 2 | (x >>> 2) & 0x33333333;
// 43218765 -> 87654321
x = (x & 0x0f0f0f0f) << 4 | (x >>> 4) & 0x0f0f0f0f;
// 1B 2B 3B 4B -> 4B 3B 2B 1B
x = (x << 24) | ((x & 0xff00) << 8) | (x >> 8) & 0xff00 | (x >>> 24);
```

### 4.2 获取右侧第 n 位

```java
(x >> n) & 1
```

### 4.3 将右侧第 n 位置 1

```java
x | (1 << n)
```

### 4.4 将右侧第 n 位置 0

```java
x & (~(1 << n))
```

### 4.5 将右侧 n 位置 0

```java
x & (~0 << n)
```

### 4.6 将右侧 n 位置 1

```java
x | ((1 << (n + 1)) - 1)
```

### 4.7 获取左侧第 n 位

```java
(x >> (32 - n)) & 1
```

## 参考

- [位运算操作常见技巧_阿飞算法的博客-CSDN博客](https://blog.csdn.net/wat1r/article/details/114298873)

