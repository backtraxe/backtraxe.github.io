# MySQL


<!--more-->

## 常见问题

### 1. MySQL 驱动是什么？

MySQL 驱动会在底层跟数据库建立网络连接，之后才能发送请求给数据库服务器，Java 代码才能基于这个连接去执行各种各样的增删改查 SQL 语句。

MySQL 官方会提供对应各种语言的 MySQL 驱动，让各种语言编写的系统通过 MySQL 驱动去访问 MySQL 数据库。

<br />

### 2. 数据库连接池是什么？

Tomcat 有多个线程来并发的处理同时接收到的多个请求，若这些线程争用一个数据库连接去访问数据库的话，效率十分低下。

数据库连接池，即存放多个数据库连接的“池塘”，让多个线程可以使用里面的数据库连接去执行 SQL 语句，执行完之后把连接放回池子里，后续还可以继续使用。

常见的数据库连接池有 DBCP、C3P0、Druid 等。

<br />

### 3. MySQL 数据库中的连接池是什么？

MySQL 内维护的与系统之间的多个数据库连接的“池塘”。

当系统每次跟 MySQL 建立连接时，进行账号密码的验证、库表权限的验证。

<br />

### 4. MySQL 如何执行 SQL 语句？

现在假设我们的数据库服务器的连接池中的某个连接接收到了网络请求，假设就是一条SQL语句，那么大家先思考一个问题， 谁负责从这个连接中去监听网络请求?谁负责从网络连接里把请求数据读取出来?

我想很多人恐怕都没思考过这个问题，但是如果大家对计算机基础知识有一个简单了解的话，应该或多或少知道一点，那就是 网络连接必须得分配给一个线程去进行处理，由一个线程来监听请求以及读取请求数据，比如从网络连接中读取和解析出来一 条我们的系统发送过去的SQL语句，如下图所示:

所以MySQL内部首先提供了一个组件，就是 **SQL接口(SQL Interface)**，他是一套执行SQL语句的接口，专门用于执行我们 发送给MySQL的那些增删改查的SQL语句

因此MySQL的工作线程接收到SQL语句之后，就会转交给SQL接口去执行，如下图。

MySQL自己本 身也是一个系统，是一个数据库管理系统，他没法直接理解这些SQL语句!

**查询解析器(Parser)** 就是负责对SQL语句进行解析的，比如对上面那个SQL语句进行一下拆解，拆解成以下几个部分: 我们现在要从“users”表里查询数据
查询“id”字段的值等于1的那行数据
对查出来的那行数据要提取里面的“id,name,age”三个字段。

当我们通过解析器理解了SQL语句要干什么之后，接着会找 **查询优化器(Optimizer)** 来选择一个最优的查询路径。

所以查询优化器大概就是干这个的，他会针对你编写的几十行、几百行甚至上千行的复杂SQL语句生成查询路径树，然后从里 面选择一条最优的查询路径出来。

最后一步，就是把查询优化器选择的最优查询路径，也就是你到底应该按照一个什么样的顺序和步骤去执行这个SQL语句的计 划，把这个计划交给底层的存储引擎去真正的执行。

但是存储引擎的话，他是支持各种各样的存储引擎的，比如我们常见的InnoDB、MyISAM、Memory等等，我们是可以选择 使用哪种存储引擎来负责具体的SQL语句执行的。

其实我们现在还漏了一个 **执行器** 的概念，这个执行器会根据优化器选择的执行方案，去调用存储引擎的接口按照一定的顺序和 步骤，就把SQL语句的逻辑给执行了。

执行器就会去根据我们的优化器生成的一套执行计划，然后不停的调用存储引擎的各种接口去完成SQL 语句的执行计划，大致就是不停的更新或者提取一些数据出来

<br />

### 5. InnoDB 存储引擎如何查询数据？

InnoDB存储引擎中有一个非常重要的放在内存里的组件，就是 **缓冲池(Buffer Pool)**，这里面会缓存很多的数据， 以便于以后在查询的时候，万一你要是内存缓冲池里有数据，就可以不用去查磁盘了。




