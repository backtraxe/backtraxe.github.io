# 位运算技巧


<!--more-->

## 基本位运算

- `&`：与。同1则1，其余为0。
- `|`：或。同0则0，其余为1。
- `~`：非。01互换。
- `^`：异或。同0异1。
- `<<`：左移。右补0。
- `>>`：带符号右移。正数左补0，负数左补1。
- `>>>`：无符号右移。左补0。

## 常用操作

### 交换两个数

```java
a ^= b; // a' == a ^ b
b ^= a; // b' == b ^ a'  == b ^ a ^ b == a
a ^= b; // a' == a' ^ b' == a ^ b ^ a == b
```

### 转为相反数

```java
n = (~n) + 1;
```

### 加 1

```java
//    -n == (~n) + 1
// -(~n) == (~(~n)) + 1
// -(~n) == n + 1
n = -(~n);
```

### 减 1

```java
//    -n == (~n) + 1
// -(-n) == (~(-n)) + 1
//     n == (~(-n)) + 1
// ~(-n) == n - 1
n = ~(-n);
```

### 英文字母转小写

```java
// 'a' == 0b01100001
// 'A' == 0b01000001
// 'z' == 0b01111010
// 'Z' == 0b01011010
// ' ' == 0b00100000
c |= ' ';
```

### 英文字母转大写

```java
// 'a' == 0b01100001
// 'A' == 0b01000001
// 'z' == 0b01111010
// 'Z' == 0b01011010
// '_' == 0b01011111
c &= '_';
```

### 英文字母大小写互转

```java
// 'a' == 0b01100001
// 'A' == 0b01000001
// 'z' == 0b01111010
// 'Z' == 0b01011010
// ' ' == 0b00100000
c ^= ' ';
```

### 判断两个数符号是否相同

```java
// 0b0... ^ 0b1... == 0b1...
// 0b0... ^ 0b0... == 0b0...
// 0b1... ^ 0b1... == 0b0...
a ^ b > 0;
```

### 判断一个数的奇偶

```java
(n & 1) == 1; // 奇数
(n & 1) == 0; // 偶数
```

### 将一个数二进制表示中最低位 1 置为 0

```java
//           n == 0b...10...0
//       n - 1 == 0b...01...1
// n & (n - 1) == 0b...000000
n & (n - 1);
```

### 只保留一个数二进制表示中最低位 1

```java
//                n == 0b.....10...0
//            n - 1 == 0b.....01...1
//      n & (n - 1) == 0b.....000000
// n -= n & (n - 1) == 0b0...010...0
n -= n & (n - 1);
```

### 统计一个数二进制表示中 1 的数量

```java
int count = 0;
while (n) {
    count++;
    n = n & (n - 1);
}
```

## 进阶操作

## 参考

- [位运算操作常见技巧_阿飞算法的博客-CSDN博客](https://blog.csdn.net/wat1r/article/details/114298873)

